## Переходим на гибкие сценарии

На данный момент:

+ у Телегама есть опция отзыва голоса, надо её реализовать нам в коде иначе получаются грёбаные дубли
+ Прописать сценарий запроса на аппрув и сам сценарий аппрува
+ Если юзер не аппрувлен — то меню у него работать по-другому должно, он должен падать в сценарий про аппрув
+ `convmachine.py`, строка 293 — когда юзер пишет надо его имя фиксировать в БД правильно
+ Конструкцию про создание пользователя которая разбросана везде надо унифицировать

Прописать нормальную логику

Проблемы:

5. Прописать меню управления своими объектами недвижимости
6. Поправить отображение результатов опроса: только последние 3-5

7. Автотесты: прописать основной сценарий
   - https://shallowdepth.online/posts/2021/12/end-to-end-tests-for-telegram-bots/
- check that message appeared in "как будто группа подъезда", id = -716321959
- Прописать тесты для сценариев аппрува
  - В базе пишем что я не заапрувлен
    - пишу, что-то — он должен сказать сообщение с "/start"
    - делаю /start и он должен начать сценарий
      - сценарий проходим заполняя всё и убеждаемся, что в базе всё появилось
        - потом пишем ещё сообщение и он пишет "Ваша заявка принята и обрабатывается администратором"
      - сценарий проходим отклоняя всё и убеждаемся, что в базе именно так и отмечено
  - В базу пишем что я заапрувлен
    - пишем /start и он говорит добро пожаловать домой
    - пишем что угодно и он говорит добро пожаловать домой

8. Инфра
  - Выкатиться куда-то как на прод
      - Базулька продовая
      - Код запущенный демоном
      - Админка доступная только мне с фильтацией по айпишнику
  - Сделать CI
      - гонять тесты перед каткой
      - катка с перезапуском процесса (докер?)
  - Бэкапы
      - точно должна бэкапиться база, куда-то хз куда
      - deadman's switch в случае если база не забэкапилась
      - как только перейдём на что-то кроме sqlite — надо будет ещё проверять целостность бэкапа


9. Тильда
   - Сделать тильдос, объясняющий проблематику
   

10. Верификация с пуш-нотификацией пользователя, что его заапрувили.
11. Поддержка нескольких подъездов.